<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>gravity-ball</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="settingBox">
        <input id="btXSpeed" type="text" class="settingPara" placeholder="plz set XSpeed" value="0"/>
        <button class="settingBt" onclick="setXSpeed()">确定</button>
        <input id="btYSpeed" type="text" class="settingPara" placeholder="plz set YSpeed" value="0"/>
        <button class="settingBt" onclick="setYSpeed()">确定</button>
        <input id="btGravity" type="text" class="settingPara" placeholder="plz set Gravity" value="10"/>
        <button class="settingBt" onclick="setGravity()">确定</button>
        <input id="btFriction" type="text" class="settingPara" placeholder="plz set Friction" value="2"/>
        <button class="settingBt" onclick="setFriction()">确定</button>
        <button class="startBt" onclick="move()">开始</button>
        
    </div>
    






    <script>
        //相对数字
        let XStart = 0;
        let YStart = 0;
        let XEnd = 500;
        let YEnd = 500;
        
        let XSpeed ;
        let YSpeed ;     
        let Gravity = 10; 
        let Friction = 2;    

        let nowX = XStart;
        let nowY = YStart;
        let loop = 0;
        let count = 0;

        


    let setXSpeed =function(){
        XSpeed = parseFloat(document.querySelector('#btXSpeed').value);
        console.log('XSpeed '+XSpeed);
        console.log(typeof XSpeed);
    }
    let setYSpeed =function(){
        YSpeed = parseFloat(document.querySelector('#btYSpeed').value);
        console.log('YSpeed '+YSpeed);
        console.log(typeof YSpeed);
    }
    let setGravity =function(){
        Gravity = parseFloat(document.querySelector('#btGravity').value);
        console.log('Gravity '+Gravity);
        console.log(typeof Gravity);
    }
    let setFriction =function(){
        Friction = parseFloat(document.querySelector('#btFriction').value);
        console.log('Friction '+Friction);
        console.log(typeof Friction);
    }




    // js 动态创建元素

    let move = () =>{

    let ball = document.createElement('div');
    ball.className = 'ball';
    document.body.appendChild(ball);
  

    ball.style.top = YStart + 'px';
    ball.style.left = XStart + 'px';
 
    

    let move_down = ()=>{
        requestAnimationFrame(()=>{
            if(nowY>=YEnd){
                count++;
                ball.parentNode.removeChild(ball);
                return;
            }

            nowX += XSpeed;
            YSpeed += (Gravity-Friction)*loop;
            nowY += YSpeed;

            ball.style.top = nowY + 'px';
            ball.style.left = nowX + 'px';
                            
            loop++;
            move_down();


        })
    }

    move_down();
}
    
    

    

        
    </script>
    
</body>
</html>